import $ from"big.js";import j from"decimal.js-light";import{PublicKey as fr}from"@solana/web3.js";import{PublicKey as L,SystemProgram as v}from"@solana/web3.js";import{PublicKey as M}from"@solana/web3.js";var w="1.1.0-beta.0";import"@colors/colors";var D=!1,S=!1,N={debug:1,default:2,info:2,warning:3,error:4,off:5},B={},O;function C(){try{let n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(r=>{try{if("test".normalize(r)!=="test")throw new Error("bad normalize")}catch{n.push(r)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){if(n instanceof Error)return n.message}return""}var U=C(),P=(p=>(p.DEBUG="DEBUG",p.INFO="INFO",p.WARNING="WARNING",p.ERROR="ERROR",p.OFF="OFF",p))(P||{}),W=(a=>(a.UNKNOWN_ERROR="UNKNOWN_ERROR",a.NOT_IMPLEMENTED="NOT_IMPLEMENTED",a.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",a.NETWORK_ERROR="NETWORK_ERROR",a.RPC_ERROR="RPC_ERROR",a.TIMEOUT="TIMEOUT",a.BUFFER_OVERRUN="BUFFER_OVERRUN",a.NUMERIC_FAULT="NUMERIC_FAULT",a.MISSING_NEW="MISSING_NEW",a.INVALID_ARGUMENT="INVALID_ARGUMENT",a.MISSING_ARGUMENT="MISSING_ARGUMENT",a.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",a.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",a))(W||{}),x="0123456789abcdef";function I(n,r=!1){let e=n;try{if(n instanceof Uint8Array){let t="";for(let o=0;o<n.length;o++)t+=x[n[o]>>4],t+=x[n[o]&15];e=`Uint8Array(0x${t})`}else if(n instanceof M)e=`PublicKey(${n.toBase58()})`;else if(n instanceof Object&&!r){let t={};Object.entries(n).forEach(([o,p])=>{t[o]=I(p,!0)}),e=JSON.stringify(t)}else r||(e=JSON.stringify(n))}catch{e=JSON.stringify(n.toString())}return e}var i=class{constructor(r){this.version=w;this.moduleName=r}_log(r,e){let t=r.toLowerCase();N[t]==null&&this.throwArgumentError("invalid log level name","logLevel",r),!((B[this.moduleName]||N.default)>N[t])&&console.log(...e)}debug(...r){this._log(i.levels.DEBUG,["[DEBUG]".blue,...r])}info(...r){this._log(i.levels.INFO,["[INFO]".green,...r])}warn(...r){this._log(i.levels.WARNING,["[WARN]".yellow,...r])}makeError(r,e,t){if(S)return this.makeError("censored error",e,{});e||(e=i.errors.UNKNOWN_ERROR),t||(t={});let o=[];Object.entries(t).forEach(([E,T])=>{o.push(`${E}=${I(T)})`)}),o.push(`code=${e}`),o.push(`module=${this.moduleName}`),o.push(`version=${this.version}`);let p=r;o.length&&(r+=" ("+o.join(", ")+")");let h=new Error(r);return h.reason=p,h.code=e,Object.entries(t).forEach(([E,T])=>{h[E]=T}),h}throwError(r,e,t){throw this.makeError(r,e,t)}throwArgumentError(r,e,t){return this.throwError(r,i.errors.INVALID_ARGUMENT,{argument:e,value:t})}assert(r,e,t,o){r||this.throwError(e,t,o)}assertArgument(r,e,t,o){r||this.throwArgumentError(e,t,o)}checkNormalize(r){r==null&&(r="platform missing String.prototype.normalize"),U&&this.throwError("platform missing String.prototype.normalize",i.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:U})}checkSafeUint53(r,e){typeof r=="number"&&(e==null&&(e="value not safe"),(r<0||r>=9007199254740991)&&this.throwError(e,i.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:r}),r%1&&this.throwError(e,i.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:r}))}checkArgumentCount(r,e,t){t?t=": "+t:t="",r<e&&this.throwError("missing argument"+t,i.errors.MISSING_ARGUMENT,{count:r,expectedCount:e}),r>e&&this.throwError("too many arguments"+t,i.errors.UNEXPECTED_ARGUMENT,{count:r,expectedCount:e})}checkNew(r,e){(r===Object||r==null)&&this.throwError("missing new",i.errors.MISSING_NEW,{name:e.name})}checkAbstract(r,e){r===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",i.errors.UNSUPPORTED_OPERATION,{name:r.name,operation:"new"}):(r===Object||r==null)&&this.throwError("missing new",i.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return O||(O=new i(w)),O}static setCensorship(r,e){if(!r&&e&&this.globalLogger().throwError("cannot permanently disable censorship",i.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),D){if(!r)return;this.globalLogger().throwError("error censorship permanent",i.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}S=!!r,D=!!e}static setLogLevel(r,e){let t=N[e.toLowerCase()];if(t==null){i.globalLogger().warn("invalid log level - "+e);return}B[r]=t}static from(r){return new i(r)}},c=i;c.errors=W,c.levels=P;import{ASSOCIATED_TOKEN_PROGRAM_ID as sr,TOKEN_PROGRAM_ID as ar}from"@solana/spl-token";import{SYSVAR_CLOCK_PUBKEY as ur,SYSVAR_RENT_PUBKEY as cr}from"@solana/web3.js";var er=c.from("common/pubkey"),tr=v.programId,nr=new L("Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo");import{PublicKey as Nr}from"@solana/web3.js";import yr from"bn.js";import{PACKET_DATA_SIZE as Ur,PublicKey as xr,Transaction as Ir}from"@solana/web3.js";var Cr=c.from("common/web3");import b from"bn.js";import l from"bn.js";var Hr=new l(0),F=new l(1),Xr=new l(2),Yr=new l(3),Zr=new l(5),K=new l(10),Qr=new l(100),re=new l(1e3),ee=new l(1e4);var y=c.from("entity/bignumber"),_=9007199254740991;function f(n){return n instanceof b?n:typeof n=="string"?n.match(/^-?[0-9]+$/)?new b(n):y.throwArgumentError("invalid BigNumberish string","value",n):typeof n=="number"?n%1?y.throwArgumentError("BigNumberish number underflow","value",n):n>=_||n<=-_?y.throwArgumentError("BigNumberish number overflow","value",n):new b(String(n)):typeof n=="bigint"?new b(n.toString()):y.throwArgumentError("invalid BigNumberish value","value",n)}import G from"toformat";var k=G,A=k;var R=c.from("entity/fraction"),g=A($),d=A(j),q={[0]:d.ROUND_DOWN,[1]:d.ROUND_HALF_UP,[2]:d.ROUND_UP},z={[0]:g.roundDown,[1]:g.roundHalfUp,[2]:g.roundUp},s=class{constructor(r,e=F){this.numerator=f(r),this.denominator=f(e)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new s(this.denominator,this.numerator)}add(r){let e=r instanceof s?r:new s(f(r));return this.denominator.eq(e.denominator)?new s(this.numerator.add(e.numerator),this.denominator):new s(this.numerator.mul(e.denominator).add(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}sub(r){let e=r instanceof s?r:new s(f(r));return this.denominator.eq(e.denominator)?new s(this.numerator.sub(e.numerator),this.denominator):new s(this.numerator.mul(e.denominator).sub(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}mul(r){let e=r instanceof s?r:new s(f(r));return new s(this.numerator.mul(e.numerator),this.denominator.mul(e.denominator))}div(r){let e=r instanceof s?r:new s(f(r));return new s(this.numerator.mul(e.denominator),this.denominator.mul(e.numerator))}toSignificant(r,e={groupSeparator:""},t=1){R.assert(Number.isInteger(r),`${r} is not an integer.`),R.assert(r>0,`${r} is not positive.`),d.set({precision:r+1,rounding:q[t]});let o=new d(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(r);return o.toFormat(o.decimalPlaces(),e)}toFixed(r,e={groupSeparator:""},t=1){return R.assert(Number.isInteger(r),`${r} is not an integer.`),R.assert(r>=0,`${r} is negative.`),g.DP=r,g.RM=z[t],new g(this.numerator.toString()).div(this.denominator.toString()).toFormat(r,e)}};export{s as Fraction};
//# sourceMappingURL=fraction.mjs.map